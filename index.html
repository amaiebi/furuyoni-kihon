<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<title>カード選択デモ（クリック＋長押し画像表示）</title>
<style>
  body { background:#0f1724; color:#fff; font-family:"Noto Sans JP",sans-serif; margin:0; padding:16px; }
  h2 { font-size:1.4rem; text-align:center; }
  .char-select { display:flex; flex-wrap:wrap; justify-content:center; gap:8px; margin-bottom:10px; }
  .char-select button {
    flex:1 1 45%; min-width:120px;
    background:#334155; color:#fff; border:none;
    border-radius:8px; padding:10px; font-size:1rem;
    cursor:pointer; transition:background .2s;
  }
  .char-select button:active { transform:scale(0.97); }
  .main { display:flex; justify-content:space-between; flex-wrap:wrap; gap:16px; }
  .col {
    flex:1 1 48%; background:#1e293b; border-radius:12px;
    padding:10px; text-align:center;
  }
  .cards { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; }
  .card {
    width:110px; height:150px; background:#fff; color:#000;
    border-radius:10px; padding:8px; cursor:pointer;
    display:flex; align-items:center; justify-content:center;
    font-size:0.9rem; line-height:1.2; text-align:center;
    transition:transform .1s, box-shadow .1s;
  }
  .card:hover { transform:translateY(-3px); box-shadow:0 0 10px #333; }
  .card.selected { background:#c7b2ff; }
  .trumps { display:grid; grid-template-columns:repeat(2,1fr); gap:8px; margin-top:10px; }
  .trump-card {
    background:#ffe9e9; color:#000; padding:8px;
    border-radius:8px; font-size:0.85rem; cursor:pointer;
  }
  .overlay {
    position:fixed; inset:0; background:rgba(0,0,0,0.8);
    display:none; align-items:center; justify-content:center;
    z-index:9999;
  }
  .overlay img {
    max-width:90vw; max-height:90vh;
    border-radius:10px; box-shadow:0 0 20px rgba(255,255,255,0.3);
  }
  @media (max-width:768px){
    .main { flex-direction:column; align-items:center; }
    .col { width:95%; }
    .card { width:42vw; height:140px; }
  }
</style>
</head>
<body>
  <h2>カード選択デモ（クリック選択＋長押し画像表示）</h2>
  <p style="text-align:center;font-size:14px;color:#aaa;">
    参考: <a href="https://gptonline.ai/" target="_blank" style="color:#8cf;">gptonline.ai</a>
  </p>

  <div class="char-select">
    <button data-char="ユリナ">ユリナ</button>
    <button data-char="ヒミカ">ヒミカ</button>
    <button data-char="サイネ">サイネ</button>
    <button data-char="トコヨ">トコヨ</button>
  </div>

  <div class="main">
    <div class="col">
      <h3 id="char-left-title">左キャラ</h3>
      <div class="cards" id="normal-left"></div>
      <div class="trumps" id="trumps-left"></div>
    </div>
    <div class="col">
      <h3 id="char-right-title">右キャラ</h3>
      <div class="cards" id="normal-right"></div>
      <div class="trumps" id="trumps-right"></div>
    </div>
  </div>

  <div class="overlay" id="overlay">
    <img id="overlay-img" src="" alt="カード効果画像">
  </div>

  <script>
  // --- キャラデータ ---
  const CHAR_DATA = {
    "ユリナ": {
      normal: [
        { name:"斬", effectImg:"images/yurina/na_01_yurina_o_n_1.png" },
        { name:"一閃", effectImg:"images/yurina/na_01_yurina_o_n_2.png" },
        { name:"柄打ち", effectImg:"images/yurina/na_01_yurina_o_n_3.png" },
        { name:"居合", effectImg:"images/yurina/na_01_yurina_o_n_4_s2.png" },
        { name:"体捌き", effectImg:"images/yurina/na_01_yurina_o_n_5_s9_5.png" },
        { name:"圧気", effectImg:"images/yurina/na_01_yurina_o_n_6.png" },
        { name:"気炎万丈", effectImg:"images/yurina/na_01_yurina_o_n_7.png" }
      ],
      trumps: [
        { name:"月影落", effectImg:"images/yurina/na_01_yurina_o_s_1.png" },
        { name:"浦波嵐", effectImg:"images/yurina/na_01_yurina_o_s_2_s5.png" },
        { name:"浮舟宿", effectImg:"images/yurina/na_01_yurina_o_s_3_s2.png" },
        { name:"天音揺波の底力", effectImg:"images/yurina/na_01_yurina_o_s_4.png" }
      ]
    },
    "ヒミカ": {
      normal: [
        { name:"シュート", effectImg:"images/himika/na_03_himika_o_n_1.png" },
        { name:"ラピッドファイア", effectImg:"images/himika/na_03_himika_o_n_2_s4.png" },
        { name:"マグナムカノン", effectImg:"images/himika/na_03_himika_o_n_3.png" },
        { name:"フルバースト", effectImg:"images/himika/na_03_himika_o_n_4.png" },
        { name:"バックステップ", effectImg:"images/himika/na_03_himika_o_n_5.png" },
        { name:"バックドラフト", effectImg:"images/himika/na_03_himika_o_n_6_s5.png" },
        { name:"スモーク", effectImg:"images/himika/na_03_himika_o_n_7.png" }
      ],
      trumps: [
        { name:"レッドバレット", effectImg:"images/himika/na_03_himika_o_s_1.png" },
        { name:"クリムゾンゼロ", effectImg:"images/himika/na_03_himika_o_s_2.png" },
        { name:"スカーレットイマジン", effectImg:"images/himika/na_03_himika_o_s_3.png" },
        { name:"ヴァーミリオンフィールド", effectImg:"images/himika/na_03_himika_o_s_4.png" }
      ]
    },
    // 他キャラも同様に追加可能
            "サイネ": {
        normal:[
          {name:"八方振り",effectImg:"images/saine/na_02_saine_o_n_1_s6_2.png"},
          {name:"薙斬り",effectImg:"images/saine/na_02_saine_o_n_2.png"},
          {name:"石突",effectImg:"images/saine/na_02_saine_o_n_3_s6_2.png"},
          {name:"見切り",effectImg:"images/saine/na_02_saine_o_n_4_s6_2.png"},
          {name:"圏域",effectImg:"images/saine/na_02_saine_o_n_5_s5.png"},
          {name:"衝音晶",effectImg:"images/saine/na_02_saine_o_n_6_s3.png"},
          {name:"無音壁",effectImg:"images/saine/na_02_saine_o_n_7.png"}
        ],
        trumps:[
          {name:"律動弧戟",effectImg:"images/saine/na_02_saine_o_s_1_s2.png"},
          {name:"響鳴共振",effectImg:"images/saine/na_02_saine_o_s_2_s2.png"},
          {name:"音無砕氷",effectImg:"images/saine/na_02_saine_o_s_3_s6_2.png"},
          {name:"氷雨細音の果ての果て",effectImg:"images/saine/na_02_saine_o_s_4_s2.png"}
        ]
      },
      "トコヨ": {
        normal:[
          {name:"梳流し",effectImg:"images/tokoyo/na_04_tokoyo_o_n_1_s2.png"},
          {name:"雅打ち",effectImg:"images/tokoyo/na_04_tokoyo_o_n_2.png"},
          {name:"跳ね兎",effectImg:"images/tokoyo/na_04_tokoyo_o_n_3.png"},
          {name:"詩舞",effectImg:"images/tokoyo/na_04_tokoyo_o_n_4.png"},
          {name:"要返し",effectImg:"images/tokoyo/na_04_tokoyo_o_n_5.png"},
          {name:"風舞台",effectImg:"images/tokoyo/na_04_tokoyo_o_n_6.png"},
          {name:"晴舞台",effectImg:"images/tokoyo/na_04_tokoyo_o_n_7_s6_2.png"}
        ],
        trumps:[
          {name:"久遠の花",effectImg:"images/tokoyo/na_04_tokoyo_o_s_1.png"},
          {name:"千歳ノ鳥",effectImg:"images/tokoyo/na_04_tokoyo_o_s_2.png"},
          {name:"無窮ノ風",effectImg:"images/tokoyo/na_04_tokoyo_o_s_3_s2.png"},
          {name:"常世ノ月",effectImg:"images/tokoyo/na_04_tokoyo_o_s_4.png"}
        ]
      }
    };

  const overlay = document.getElementById("overlay");
  const overlayImg = document.getElementById("overlay-img");
  const btns = document.querySelectorAll("button[data-char]");
  const normalLeft = document.getElementById("normal-left");
  const normalRight = document.getElementById("normal-right");
  const trumpLeft = document.getElementById("trumps-left");
  const trumpRight = document.getElementById("trumps-right");
  const leftTitle = document.getElementById("char-left-title");
  const rightTitle = document.getElementById("char-right-title");

  let selectedChars = [];
  let selectedNormals = [];

  btns.forEach(btn => {
    btn.addEventListener("click", () => {
      const name = btn.dataset.char;
      const idx = selectedChars.indexOf(name);
      if (idx !== -1) {
        selectedChars.splice(idx, 1);
        btn.style.background = "#334155";
      } else {
        if (selectedChars.length < 2) {
          selectedChars.push(name);
          btn.style.background = "#64748b";
        } else {
          const removed = selectedChars.shift();
          document.querySelector(`button[data-char='${removed}']`).style.background = "#334155";
          selectedChars.push(name);
          btn.style.background = "#64748b";
        }
      }
      render();
    });
  });

  function makeCard(card, isTrump = false) {
    const el = document.createElement("div");
    el.className = isTrump ? "trump-card" : "card";
    el.textContent = card.name;

    // 通常札クリックで選択／解除
    el.addEventListener("click", (e) => {
      if (!isTrump) {
        if (el.classList.contains("selected")) {
          el.classList.remove("selected");
          selectedNormals = selectedNormals.filter(x => x !== el);
        } else {
          if (selectedNormals.length < 7) {
            el.classList.add("selected");
            selectedNormals.push(el);
          } else {
            alert("通常札は7枚まで選択できます。");
          }
        }
      } else {
        if (card.effectImg) showImage(card.effectImg);
      }
    });

    // 長押し検出（スマホ対応）
    let touchTimer;
    el.addEventListener("touchstart", () => {
      touchTimer = setTimeout(() => {
        if (card.effectImg) showImage(card.effectImg);
      }, 600); // 0.6秒長押しで発動
    });
    el.addEventListener("touchend", () => clearTimeout(touchTimer));
    el.addEventListener("touchmove", () => clearTimeout(touchTimer));

    // 右クリック（PC用）
    el.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      if (card.effectImg) showImage(card.effectImg);
    });

    return el;
  }

  function showImage(src) {
    overlayImg.src = src;
    overlay.style.display = "flex";
  }

  overlay.addEventListener("click", () => overlay.style.display = "none");

  function render() {
    normalLeft.innerHTML = normalRight.innerHTML = trumpLeft.innerHTML = trumpRight.innerHTML = "";
    const left = selectedChars[0];
    const right = selectedChars[1];
    leftTitle.textContent = left || "左キャラ";
    rightTitle.textContent = right || "右キャラ";
    if (left) {
      CHAR_DATA[left].normal.forEach(c => normalLeft.appendChild(makeCard(c, false)));
      CHAR_DATA[left].trumps.forEach(c => trumpLeft.appendChild(makeCard(c, true)));
    }
    if (right) {
      CHAR_DATA[right].normal.forEach(c => normalRight.appendChild(makeCard(c, false)));
      CHAR_DATA[right].trumps.forEach(c => trumpRight.appendChild(makeCard(c, true)));
    }
  }

  render();
  </script>
</body>
</html>
