<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>カード選択デモ（スマホ全画面固定）</title>
<style>
  html, body {
    margin:0; padding:0;
    width:100%; height:100%;
    overflow:hidden; /* スクロール禁止 */
    background:#0f1724; color:#fff;
    font-family:"Noto Sans JP",sans-serif;
  }
  body {
    display:flex; flex-direction:column;
    justify-content:space-between;
    align-items:center;
    height:95vh; box-sizing:border-box;
  }
  h2 { font-size:1.1rem; margin:4px 0; }
  .char-select {
    display:flex; justify-content:center; flex-wrap:wrap;
    gap:4px; width:100%; padding:4px;
  }
  .char-select button {
    flex:1 1 22%; min-width:70px;
    background:#334155; color:#fff; border:none;
    border-radius:6px; padding:6px;
    font-size:0.75rem; cursor:pointer;
  }
  .main {
    flex:1;
    display:flex; justify-content:space-around; align-items:center;
    width:100%;
    padding:0 4px;
  }
  .col {
    flex:1; display:flex; flex-direction:column;
    align-items:center; justify-content:space-between;
    background:#1e293b; border-radius:10px;
    margin:4px; padding:4px;
    height:88%;
  }
  .cards {
    display:flex; flex-wrap:wrap; justify-content:center; gap:4px;
    width:100%;
  }
  .card {
    width:11vw; height:13vw;
    background:#fff; color:#000;
    border-radius:8px;
    display:flex; align-items:center; justify-content:center;
    font-size:0.7rem; text-align:center;
    cursor:pointer; transition:background .1s;
  }
  .card.selected { background:#c7b2ff; }
  .trumps {
    display:grid; grid-template-columns:repeat(2,1fr);
    gap:4px; width:100%;
  }
  .trump-card {
    background:#ffe9e9; color:#000;
    font-size:0.65rem; border-radius:6px;
    padding:3px; cursor:pointer;
    text-align:center;
  }
  .overlay {
    position:fixed; inset:0; background:rgba(0,0,0,0.85);
    display:none; align-items:center; justify-content:center;
    z-index:9999;
  }
  .overlay img {
    max-width:85vw; max-height:85vh;
    border-radius:10px;
  }

  /* iPhoneの上下バー領域考慮 */
  @supports (padding: env(safe-area-inset-bottom)) {
    body { padding-bottom: env(safe-area-inset-bottom); }
  }
</style>
</head>
<body>
  <h2>カード選択デモ（スマホ全画面固定）</h2>

  <div class="char-select">
    <button data-char="ユリナ">ユリナ</button>
    <button data-char="ヒミカ">ヒミカ</button>
    <button data-char="サイネ">サイネ</button>
    <button data-char="トコヨ">トコヨ</button>
  </div>

  <div class="main">
    <div class="col">
      <div id="char-left-title">左キャラ</div>
      <div class="cards" id="normal-left"></div>
      <div class="trumps" id="trumps-left"></div>
    </div>
    <div class="col">
      <div id="char-right-title">右キャラ</div>
      <div class="cards" id="normal-right"></div>
      <div class="trumps" id="trumps-right"></div>
    </div>
  </div>

  <div class="overlay" id="overlay">
    <img id="overlay-img" src="" alt="カード効果">
  </div>

  <script>
  const CHAR_DATA={
    "ユリナ": {
      normal: [
        { name:"斬", effectImg:"images/yurina/na_01_yurina_o_n_1.png" },
        { name:"一閃", effectImg:"images/yurina/na_01_yurina_o_n_2.png" },
        { name:"柄打ち", effectImg:"images/yurina/na_01_yurina_o_n_3.png" },
        { name:"居合", effectImg:"images/yurina/na_01_yurina_o_n_4_s2.png" },
        { name:"体捌き", effectImg:"images/yurina/na_01_yurina_o_n_5_s9_5.png" },
        { name:"圧気", effectImg:"images/yurina/na_01_yurina_o_n_6.png" },
        { name:"気炎万丈", effectImg:"images/yurina/na_01_yurina_o_n_7.png" }
      ],
      trumps: [
        { name:"月影落", effectImg:"images/yurina/na_01_yurina_o_s_1.png" },
        { name:"浦波嵐", effectImg:"images/yurina/na_01_yurina_o_s_2_s5.png" },
        { name:"浮舟宿", effectImg:"images/yurina/na_01_yurina_o_s_3_s2.png" },
        { name:"天音揺波の底力", effectImg:"images/yurina/na_01_yurina_o_s_4.png" }
      ]
    },
    "ヒミカ": {
      normal: [
        { name:"シュート", effectImg:"images/himika/na_03_himika_o_n_1.png" },
        { name:"ラピッドファイア", effectImg:"images/himika/na_03_himika_o_n_2_s4.png" },
        { name:"マグナムカノン", effectImg:"images/himika/na_03_himika_o_n_3.png" },
        { name:"フルバースト", effectImg:"images/himika/na_03_himika_o_n_4.png" },
        { name:"バックステップ", effectImg:"images/himika/na_03_himika_o_n_5.png" },
        { name:"バックドラフト", effectImg:"images/himika/na_03_himika_o_n_6_s5.png" },
        { name:"スモーク", effectImg:"images/himika/na_03_himika_o_n_7.png" }
      ],
      trumps: [
        { name:"レッドバレット", effectImg:"images/himika/na_03_himika_o_s_1.png" },
        { name:"クリムゾンゼロ", effectImg:"images/himika/na_03_himika_o_s_2.png" },
        { name:"スカーレットイマジン", effectImg:"images/himika/na_03_himika_o_s_3.png" },
        { name:"ヴァーミリオンフィールド", effectImg:"images/himika/na_03_himika_o_s_4.png" }
      ]
    },
    // 他キャラも同様に追加可能
            "サイネ": {
        normal:[
          {name:"八方振り",effectImg:"images/saine/na_02_saine_o_n_1_s6_2.png"},
          {name:"薙斬り",effectImg:"images/saine/na_02_saine_o_n_2.png"},
          {name:"石突",effectImg:"images/saine/na_02_saine_o_n_3_s6_2.png"},
          {name:"見切り",effectImg:"images/saine/na_02_saine_o_n_4_s6_2.png"},
          {name:"圏域",effectImg:"images/saine/na_02_saine_o_n_5_s5.png"},
          {name:"衝音晶",effectImg:"images/saine/na_02_saine_o_n_6_s3.png"},
          {name:"無音壁",effectImg:"images/saine/na_02_saine_o_n_7.png"}
        ],
        trumps:[
          {name:"律動弧戟",effectImg:"images/saine/na_02_saine_o_s_1_s2.png"},
          {name:"響鳴共振",effectImg:"images/saine/na_02_saine_o_s_2_s2.png"},
          {name:"音無砕氷",effectImg:"images/saine/na_02_saine_o_s_3_s6_2.png"},
          {name:"氷雨細音の果ての果て",effectImg:"images/saine/na_02_saine_o_s_4_s2.png"}
        ]
      },
      "トコヨ": {
        normal:[
          {name:"梳流し",effectImg:"images/tokoyo/na_04_tokoyo_o_n_1_s2.png"},
          {name:"雅打ち",effectImg:"images/tokoyo/na_04_tokoyo_o_n_2.png"},
          {name:"跳ね兎",effectImg:"images/tokoyo/na_04_tokoyo_o_n_3.png"},
          {name:"詩舞",effectImg:"images/tokoyo/na_04_tokoyo_o_n_4.png"},
          {name:"要返し",effectImg:"images/tokoyo/na_04_tokoyo_o_n_5.png"},
          {name:"風舞台",effectImg:"images/tokoyo/na_04_tokoyo_o_n_6.png"},
          {name:"晴舞台",effectImg:"images/tokoyo/na_04_tokoyo_o_n_7_s6_2.png"}
        ],
        trumps:[
          {name:"久遠の花",effectImg:"images/tokoyo/na_04_tokoyo_o_s_1.png"},
          {name:"千歳ノ鳥",effectImg:"images/tokoyo/na_04_tokoyo_o_s_2.png"},
          {name:"無窮ノ風",effectImg:"images/tokoyo/na_04_tokoyo_o_s_3_s2.png"},
          {name:"常世ノ月",effectImg:"images/tokoyo/na_04_tokoyo_o_s_4.png"}
        ]
      }
    };

  const overlay=document.getElementById("overlay");
  const overlayImg=document.getElementById("overlay-img");
  const btns=document.querySelectorAll("button[data-char]");
  const normalLeft=document.getElementById("normal-left");
  const normalRight=document.getElementById("normal-right");
  const trumpLeft=document.getElementById("trumps-left");
  const trumpRight=document.getElementById("trumps-right");
  const leftTitle=document.getElementById("char-left-title");
  const rightTitle=document.getElementById("char-right-title");

  let selectedChars=[]; let selectedNormals=[];

  btns.forEach(btn=>{
    btn.addEventListener("click",()=>{
      const name=btn.dataset.char;
      const idx=selectedChars.indexOf(name);
      if(idx!==-1){ selectedChars.splice(idx,1); btn.style.background="#334155";}
      else{
        if(selectedChars.length<2){selectedChars.push(name); btn.style.background="#64748b";}
        else{
          const removed=selectedChars.shift();
          document.querySelector(`button[data-char='${removed}']`).style.background="#334155";
          selectedChars.push(name); btn.style.background="#64748b";
        }
      }
      render();
    });
  });

  function makeCard(card,isTrump=false){
    const el=document.createElement("div");
    el.className=isTrump?"trump-card":"card";
    el.textContent=card.name;

    // 通常札クリックで選択
    el.addEventListener("click",()=>{
      if(!isTrump){
        if(el.classList.contains("selected")){
          el.classList.remove("selected");
          selectedNormals=selectedNormals.filter(x=>x!==el);
        }else{
          if(selectedNormals.length<7){
            el.classList.add("selected");
            selectedNormals.push(el);
          }else alert("通常札は7枚まで選択できます。");
        }
      }else{
        if(card.effectImg) showImage(card.effectImg);
      }
    });

    // 長押しで効果画像表示
    let timer;
    el.addEventListener("touchstart",()=>{ timer=setTimeout(()=>{ if(card.effectImg) showImage(card.effectImg); },600); });
    el.addEventListener("touchend",()=>clearTimeout(timer));
    el.addEventListener("touchmove",()=>clearTimeout(timer));

    el.addEventListener("contextmenu",(e)=>{ e.preventDefault(); if(card.effectImg) showImage(card.effectImg); });
    return el;
  }

  function showImage(src){ overlayImg.src=src; overlay.style.display="flex"; }
  overlay.addEventListener("click",()=>overlay.style.display="none");

  function render(){
    normalLeft.innerHTML=normalRight.innerHTML=trumpLeft.innerHTML=trumpRight.innerHTML="";
    const left=selectedChars[0]; const right=selectedChars[1];
    leftTitle.textContent=left||"左キャラ";
    rightTitle.textContent=right||"右キャラ";
    if(left){ CHAR_DATA[left].normal.forEach(c=>normalLeft.appendChild(makeCard(c,false))); CHAR_DATA[left].trumps.forEach(c=>trumpLeft.appendChild(makeCard(c,true))); }
    if(right){ CHAR_DATA[right].normal.forEach(c=>normalRight.appendChild(makeCard(c,false))); CHAR_DATA[right].trumps.forEach(c=>trumpRight.appendChild(makeCard(c,true))); }
  }
  render();
  </script>
</body>
</html>
